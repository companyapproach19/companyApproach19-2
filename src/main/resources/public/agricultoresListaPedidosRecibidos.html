<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

    <title>AgricultoresPedidosRecibidos</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!------ Include the above in your HEAD tag ---------->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<link href="style2.css" rel="stylesheet" id="bootstrap-css">
</head>
<body>
<div class="container register agricultores">
                <div class="row">
             
                    <div class="col-md-3 register-left">
                        <img src="icono-agricultor.png" alt=""/>
                        <h1>Agricultores</h1>
                        <!--<p>Pedidos recibidos</p>-->
                    </div>
                    <div class="col-md-9 register-right pedidosaceptados">
                            <ul class="nav nav-tabs nav-justified" id="myTab" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link" id="home" data-toggle="submit" href="#home" role="submit" aria-controls="home" aria-selected="true" onclick="window.location.href='/';">Log out</a>
                            </li>
                            </ul>
                            <p></p>
                            <div class="col-3 borde">
                                <ul class="nav nav-tabs nav-justified" id="myTab" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link" id="home2" data-toggle="submit" href="#home2" role="submit" aria-controls="home2" aria-selected="true" onclick="window.location.href='agricultoresInicio.html';">Volver</a>
                                </li>
                                </ul>
                            </div>
                            <div class="tab-pane fade show" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                                <h3  class="register-heading">PEDIDOS RECIBIDOS</h3>
                                <div class="row register-form">
                                    <div class="col-md-8 pedidoscenter">
                                        <div class="form-group">
                                            <input type="checkbox" name="producto1" id="producto1" value="Pedido id1">
                                            <label for="producto1" id="label1">Pedido noPedido</label>
                                            <a href="" data-toggle="modal" data-target="#exampleModalScrollable"> Ver más información del pedido </a>

                                        </div>
                                        <div class="form-group">
                                            <input type="checkbox" name="producto2" id="producto2" value="Pedido id2">
                                            <label for="producto2" id="label2">Pedido noPedido</label>
                                            <a href="" data-toggle="modal" data-target="#exampleModalScrollable"> Ver más información del pedido </a>

                                        </div>
                                        <div class="form-group">
                                            <input type="checkbox" name="producto3" id="producto3" value="Pedido id3">
                                            <label for="producto3" id="label3">Pedido noPedido</label>
                  											   <a href="" data-toggle="modal" data-target="#exampleModalScrollable"> Ver más información del pedido </a>                        
                  											</div>
                                        <div class="form-group">
                                            <input type="checkbox" name="producto4" id="producto4" value="Pedido id4">
                                            <label for="producto4" id="label4">Pedido noPedido</label>
                                            <a href="" data-toggle="modal" data-target="#exampleModalScrollable"> Ver más información del pedido </a>

                                        </div>
                                        <div class="form-group">
                                            <input type="checkbox" name="producto5" id="producto5" value="Pedido id5">
                                            <label for="producto5" id="label5">Pedido noPedido</label>
                                            <a href="" data-toggle="modal" data-target="#exampleModalScrollable"> Ver más información del pedido </a>
                                        </div>
                                        <div class="form-group">
                                            <input type="checkbox" name="producto6" id="producto6" value="Pedido id6">
                                            <label for="producto6" id="label6">Pedido noPedido</label>
                                            <a href="" data-toggle="modal" data-target="#exampleModalScrollable"> Ver más información del pedido </a>
                                        </div>
                                        <div class="form-group">
                                            <input type="checkbox" name="producto7" id="producto7" value="Pedido id7">
                                            <label for="producto7" id="label7">Pedido noPedido</label>
                                            <a href="" data-toggle="modal" data-target="#exampleModalScrollable"> Ver más información del pedido </a>
                                        </div>
                                        <label for="producto">*Los pedidos que no sean seleccionados se rechazaran automaticamente*</label>
                                        <br>
                                        <input type="submit" class="btnRegister"  id="botonrecibidos" onClick="mandarids(); window.location.href='agricultoresInicio.html';" value="Aceptar Pedidos"/>

                                         <!-- MODAL -->
                                <div class="modal fade" id="exampleModalScrollable" tabindex="-1" role="dialog" aria-labelledby="exampleModalScrollableTitle" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-scrollable" role="document">
                                        <div class="modal-content">
                                          <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalScrollableTitle">Información del pedido</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                              <span aria-hidden="true">&times;</span>
                                            </button>
                                          </div>
                                          <div class="modal-body">
                                           Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.

Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.

Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.

Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.
                                          </div>
                                          <div class="modal-footer">
                                            <button class="btnRegister" data-dismiss="modal">Atrás</button>
                                            <button class="btnRegister" data-dismiss="modal">Aceptar pedido</button>
                                          </div>
                                        </div>
                                      </div>
                                    </div>   
                                    <!-- MODAL -->
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>

            </div>
</div>
</body>
<script>
function get_cookies()
{
	var json_c;
var key;
var value;


json_c = {};
for(var cookie of document.cookie.split(";"))
{
		cookie = cookie.trim();
		key = cookie.split("=")[0];
		value = cookie.split("=")[1];
		json_c[key] = value;
}
return json_c;
}
window.onload = hacerPeticion;
var sifalla = [1,25,695,22,88,7];
data2 = {"listaIDs" : [1,5,9]};
data = JSON.stringify(data2);

 function hacerPeticion(){
  //Aqui se puede dar un valor por defecto, solo por si acaso
        var local_data;


      var request = $.ajax({
      // la URL para la petición
      url : '/ordenesPendientesPorAceptar',
 
      // la información a enviar
      // (también es posible utilizar una cadena de datos) //ID del actor
      data :"idActor="+get_cookies().id ,
 
      // especifica si será una petición POST o GET
      type : 'GET',
 
      // el tipo de información que se espera de respuesta
      dataType : 'json',
 
      });
 
     request.done(function(data){
      

     imprimirjson(data);
    
     });
 
     request.fail(function(data) {
     
     alert("Error en el servidor obteniendo ids");
    mostrarFallo();
     });
 
 }
 //Funcion que saca una lista
 function imprimirjson(data){
          var hola = JSON.parse(data);
          var local_data = hola.listaIDs;
          console.log(hola);
          console.log(local_data);
                 var label = 'label';
            for (var i = 0; i< data.length; i++) {
                var x = data[i];
                //console.log(label.concat(x));
                document.getElementById(label.concat(x)).innerHTML = data[i];

                }

 }


  function mostrarFallo(){
         var local_data = sifalla;
            var label = 'label';
            for (var i = 1; i< local_data.length + 1; i++) {
                var x = i.toString(10);
                //console.log(label.concat(x));
                document.getElementById(label.concat(x)).innerHTML = sifalla[i-1];

                }    
        }



function mandarids(){
  var str = 'producto';
  var array = [-1,-1,-1,-1,-1,-1,-1];
  var booleano = false;
  var str2 = '';
  var aux;
  var label = 'label';
  for (var i = 1; i< 8; i++) {
    var x = i.toString(10);
    str2 = str.concat(x);
    aux = document.getElementById(str2);
    if (aux.checked){
      array[i-1] = document.getElementById(label.concat(x));
      }
    
    }

data2 = {"listaIDs" : array};
data = JSON.stringify(data2);

  var request = $.ajax({
      // la URL para la petición
      url : '/aceptarPedido',
 
      // la información a enviar
      // (también es posible utilizar una cadena de datos) //ID del actor
      data :data,
 
      // especifica si será una petición POST o GET
      type : 'POST',
 
      // el tipo de información que se espera de respuesta
      dataType : 'json',
 
      });
 
     request.done(function(data){
      
         
     });
 
     request.fail(function(data) {
     
     alert("Error en el servidor al aceptar");
   
     });




}


  
</script>

</html>