<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!------ Include the above in your HEAD tag ---------->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<link href="style2.css" rel="stylesheet" id="bootstrap-css">

<div class="container register agricultores">
                <div class="row">
             
                    <div class="col-md-3 register-left">
                        <img src="icono-tienda.png" alt=""/>
                        <h1>Tienda</h1>
                        <!--<p>Pedidos recibidos</p>-->
                    </div>
                    <div class="col-md-9 register-right largotienda">
                        <ul class="nav nav-tabs nav-justified" id="myTab" role="tablist">
                            <li class="nav-item">
								<a class="nav-link" id="home" data-toggle="submit" href="#home" role="submit" aria-controls="home" aria-selected="true" onclick="window.location.href='/';">Log out</a>                           
								</li>
                        </ul>
                        <p></p>
                            <div class="col-3 borde">
                                <ul class="nav nav-tabs nav-justified" id="myTab" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link" id="home2" data-toggle="submit" href="#home2" role="submit" aria-controls="home2" aria-selected="true" onclick="window.location.href='tiendaInicio.html';">Volver</a>
                                </li>
                                </ul>
                            </div>
                        <div class="tab-content centrado" id="myTabContent">
                            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                                <h3 class="register-heading">SOLICITAR PEDIDO</h3>
								<br>
								<br>
								<br>
                                <div class="row register-form">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                          <h6>* Identificador:</h6>
                                            <input type="text" class="form-control" placeholder="* Número de Identificador" id="identificador" value="" />
                                        </div>
                                        <div class="form-group">
                                          <h6>* Transportista:</h6>
                                            <input type="text" class="form-control" placeholder="* Transportista" id="transportista" value="" />
                                            <br>
                                             <label for="producto">Las casillas con * son campos obligatorios</label>
                                        </div>
                                       
                                        <div class="form-group">
                                            <div class="maxl">
                                                
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                          <h6>Cajas Stoul:</h6>
                                            <input type="number" class="form-control" placeholder="Número de cajas" id="cajas_stoul" value="" min=0 />
                                        </div>
                                        <div class="form-group">
                                          <h6>Cajas Pillsner:</h6>
                                            <input type="number" class="form-control"  placeholder="Número de cajas" value="" id="cajas_bisner" min=0 />
                                        </div>
                                        <input type="submit" class="btnRegister" onClick="hacerPeticion(); window.location.href='tiendaInicio.html';" value="Enviar pedido"/>
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>

            </div>
</div>


<script>
function hacerPeticion(){
      var request = $.ajax({
      // la URL para la petición
      url : '/creaPedido',
 
      // la información a enviar
      // (también es posible utilizar una cadena de datos)
      data : paraJson(),
 
      // especifica si será una petición POST o GET
      type : 'POST',
 
      // el tipo de información que se espera de respuesta
      dataType : 'json',
 
      });
 
     request.done(function(data){
      
      //TODO Este metodo redirige a la URL
      windows.append('/tiendaInicio.html');
    
     });
 
     request.fail(function(data) {
     
     alert("Error en el servidor");
     
     });
 
 }
 
 function paraJson() {

    var object = { 
      id: -1,
      mensaje : "",
    actorOrigen: {
      id: 9,
      nombreUsuario: "Retailer",
      tipoActor:  5
    },
    "actorDestino": {
        id: document.getElementById("identificador").value,
      nombreUsuario: "Fabrica",
      tipoActor: 4
    },
    productos: {
  cant_malta_palida: 0,
  cant_malta_munich: 0,
  cant_malta_negra: 0,
  cant_malta_crystal:0,
  cant_malta_chocolate:0,
  cant_malta_caramelo: 0,
  cant_cebada: 0, 
  cant_cebada_tostada: 0,
  cant_lupulo_centenial:0,
  cant_cajas_stout:document.getElementById("cajas_stoul").value,
  cant_cajas_bisner:document.getElementById("cajas_bisner").value,
    },
	mensaje: "PeticiĂ³n de prueba.",
    estado: 0,
    idPadre: 5196,
    idHijo: 1952,
    transportista: {
      id: 92,
      nombreUsuario: document.getElementById("transportista").value,
      email: "dortoc@refranes.com",
      tipoActor: 2
    }
  
        };
    
    var jsonText = JSON.stringify(object);
    console.log(jsonText);
    return jsonText;

  }
 
 
 //TODO 
 
</script>
