<!DOCTYPE html>
<html>
<head>
    <title>FabricaSolicitarPedido</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!------ Include the above in your HEAD tag ---------->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<link href="style2.css" rel="stylesheet" id="bootstrap-css">
</head>
<body>
<div class="container register solicitarpedidos">
                <div class="row">
             
                    <div class="col-md-3 register-left">
                        <img src="icono-fabrica.png" alt=""/>
                        <h1>Fábrica</h1>
                        <!--<p>Pedidos recibidos</p>-->
                    </div>
                    <div class="col-md-9 register-right">
                        <ul class="nav nav-tabs nav-justified" id="myTab" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link" id="home" data-toggle="submit" href="#home" role="submit" aria-controls="home" aria-selected="true" onclick="window.location.href='C:/Users/crist/OneDrive/Documents/companyApproach19-2/src/main/resources/templates/login.html';">Log out</a>
                            </li>
                        </ul>
                        <p></p>
                            <div class="col-3 borde">
                                <ul class="nav nav-tabs nav-justified" id="myTab" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link" id="home2" data-toggle="submit" href="#home2" role="submit" aria-controls="home2" aria-selected="true" onclick="window.location.href='NumLote.html';">Volver</a>
                                </li>
                                </ul>
                            </div>
                        <div class="tab-content" id="myTabContent">
                            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                                <h3 class="register-heading">SOLICITAR PEDIDO</h3>
                                <br>								
                                <div class="row register-form">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <input type="text" class="form-control" placeholder="* Destino" id="destino" value="" />
                                        </div>
                                        <div class="form-group">
                                            <input type="text" class="form-control" placeholder="* Identificador" id="identificador" value="" />
                                            <br>
                                            <label for="producto">Las casillas con * son campos obligatorios</label>
                                        </div>
                                       
                                        <div class="form-group">
                                            <div class="maxl">
                                                
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <input type="number" class="form-control" placeholder="Malta de base palida" id="malta_palida" value="" min=0 />
                                        </div>
                                        <div class="form-group">
                                            <input type="number" class="form-control"  placeholder="Malta Munich" id="malta_munich" value="" min=0 />
                                        </div>
                                        <div class="form-group">
                                            <input type="number" class="form-control" placeholder="Malta negra" id="malta_negra" value="" min=0 />
                                        </div>
                                        <div class="form-group">
                                            <input type="number" class="form-control"  placeholder="Malta crystal" id="malta_crystal" value="" min=0 />
                                        </div>
                                        <div class="form-group">
                                            <input type="number" class="form-control" placeholder="Malta chocolate" id="malta_chocolate" value="" min=0 />
                                        </div>
                                        <div class="form-group">
                                            <input type="number" class="form-control"  placeholder="Malta caramelo" id="malta_caramelo" value="" min=0 />
                                        </div>
                                        <div class="form-group">
                                            <input type="number" class="form-control" placeholder="Cebada" id="cebada" value="" />
                                        </div>
                                        <div class="form-group">
                                            <input type="number" class="form-control"  placeholder="Cebada tostada" id="cebada_tostada" value="" />
                                        </div>
                                        <div class="form-group">
                                            <input type="number" class="form-control"  placeholder="Lupulo centenial" id="lupulo_centinental" value="" />
                                        </div>
                                       <input type="submit" class="btnRegister"  onClick="hacerPeticion();" value="Enviar pedido"/>
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>

            </div>
</div>
</body>
<script>
function hacerPeticion(){
      var request = $.ajax({
      // la URL para la petición
      url : '/creaPedido',
 
      // la información a enviar
      // (también es posible utilizar una cadena de datos)
      data : paraJson(),
 
      // especifica si será una petición POST o GET
      type : 'POST',
 
      // el tipo de información que se espera de respuesta
      dataType : 'json',
 
      });
 
     request.done(function(data){
      
      //TODO Este metodo redirige a la URL
      windows.append('/NumLote.html');
    
     });
 
     request.fail(function(data) {
     
     alert("Error en el servidor");
     
     });
 
 }
 
 function paraJson() {

    var object = { 
	    id: -1,
      mensaje : "",
    actorOrigen: {
      id: 6,
      nombreUsuario: "Productor",
      tipoActor:  2
    },
    "actorDestino": {
        id: document.getElementById("identificador").value,
      nombreUsuario: "Agricultor",
      tipoActor: 1 
    },
    productos: {
	cant_malta_palida: document.getElementById("malta_palida").value,
	cant_malta_munich: document.getElementById("malta_munich").value,
	cant_malta_negra: document.getElementById("malta_negra").value,
	cant_malta_crystal: document.getElementById("malta_crystal").value,
	cant_malta_chocolate: document.getElementById("malta_chocolate").value,
	cant_malta_caramelo: document.getElementById("malta_caramelo").value,
	cant_cebada: document.getElementById("cebada").value, 
	cant_cebada_tostada: document.getElementById("cebada_tostada").value,
	cant_lupulo_centenial:document.getElementById("lupulo_centinental").value,
	cant_cajas_stout:0,
    	cant_cajas_bisner:0
    },
  
        };
		
		var jsonText = JSON.stringify(object);
    console.log(jsonText);
    return jsonText;

  }
 
 
 //TODO 
 
</script>
</html>