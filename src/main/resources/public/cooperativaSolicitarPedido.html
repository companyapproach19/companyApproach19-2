<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

    <title>CooperativaSolicitarPedido</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!------ Include the above in your HEAD tag ---------->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<link href="style2.css" rel="stylesheet" id="bootstrap-css">
</head>
<body>
<div class="container register solicitarpedidos">
                <div class="row">
             
                    <div class="col-md-3 register-left">
                        <img src="icono-cooperativa.png" alt=""/>
                        <h1>Cooperativa</h1>
                        <!--<p>Pedidos recibidos</p>-->
                    </div>
                    <div class="col-md-9 register-right">
                        <ul class="nav nav-tabs nav-justified" id="myTab" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link" id="home" data-toggle="submit" href="#home" role="submit" aria-controls="home" aria-selected="true" onclick="window.location.href='/';">Log out</a>
                            </li>
                        </ul>
                        <p></p>
                            <div class="col-3 borde">
                                <ul class="nav nav-tabs nav-justified" id="myTab" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link" id="home2" data-toggle="submit" href="#home2" role="submit" aria-controls="home2" aria-selected="true" onclick="window.location.href='cooperativaInicio.html';">Volver</a>
                                </li>
                                </ul>
                            </div>
                        <div class="tab-content" id="myTabContent">
                            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                                <h3 class="register-heading">SOLICITAR PEDIDO</h3>
                                <br>					
                                <br>			
                                <div class="row register-form">
                                    <div class="col-md-6">
											   
                                        <div class="form-group">
                                            <h6>* Destino:</h6>
                                            <input type="text" class="form-control" placeholder="* Destino" id="destino" value="" />
                                        </div>
                                        <div class="form-group">
                                          <h6>* Identificador:</h6>
                                            <input type="text" class="form-control" placeholder="* Número de Identificador" id="identificador" value="" />
                                           
                                          </div>
                                            <div class="form-group">
                                            <h6>* Identificador de pedido:</h6>
                                            <input type="text" class="form-control" placeholder="* Número de Identificador de pedido" id="destino" value="" />
                                           <br>
                                            <label for="producto">Las casillas con * son campos obligatorios</label>
                                            <label for="producto">La cantidad en kg no puede contener números con decimales </label>
                                        </div>
                                       
                                        <div class="form-group">
                                            <div class="maxl">
                                                
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
											   
                                        <div class="form-group">
                                          <h6>Malta de base palida:</h6>
                                            <input type="number" class="form-control" placeholder="Cantidad en kg" id="malta_palida" value="" min=0 />
                                        </div>
                                        <div class="form-group">
                                          <h6>Malta Munich:</h6>
                                            <input type="number" class="form-control"  placeholder="Cantidad en kg" id="malta_munich" value="" min=0 />
                                        </div>
                                        <div class="form-group">
                                          <h6>Malta negra:</h6>
                                            <input type="number" class="form-control" placeholder="Cantidad en kg" id="malta_negra" value="" min=0 />
                                        </div>
                                        <div class="form-group">
                                          <h6>Malta crystal:</h6>
                                            <input type="number" class="form-control"  placeholder="Cantidad en kg" id="malta_crystal" value="" min=0 />
                                        </div>
                                        <div class="form-group">
                                          <h6>Malta chocolate:</h6>
                                            <input type="number" class="form-control" placeholder="Cantidad en kg" id="malta_chocolate" value="" min=0 />
                                        </div>
                                        <div class="form-group">
                                          <h6>Malta caramelo:</h6>
                                            <input type="number" class="form-control"  placeholder="Cantidad en kg" id="malta_caramelo" value="" min=0 />
                                        </div>
                                        <div class="form-group">
                                          <h6>Cebada:</h6>
                                            <input type="number" class="form-control" placeholder="Cantidad en kg" id="cebada" value="" />
                                        </div>
                                        <div class="form-group">
                                          <h6>Cebada tostada:</h6>
                                            <input type="number" class="form-control"  placeholder="Cantidad en kg" id="cebada_tostada" value="" />
                                        </div>
                                        <div class="form-group">
                                          <h6>Lupulo centinal:</h6>
                                            <input type="number" class="form-control"  placeholder="Cantidad en kg" id="lupulo_centinental" value="" />
                                        </div>
                                       <input type="submit" class="btnRegister"  onClick="hacerPeticion();" value="Enviar pedido"/>
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>

            </div>
</div>
</body>
<script>
function hacerPeticion(){
      var request = $.ajax({
      // la URL para la petición
      url : '/crearOrden',
 
      // la información a enviar
      // (también es posible utilizar una cadena de datos)
      data : "json="+paraJson(),
 
      // especifica si será una petición POST o GET
      type : 'POST',
 
      // el tipo de información que se espera de respuesta
      dataType : 'json',
 
      });
 
     request.done(function(data){
      
      //TODO Este metodo redirige a la URL
      window.location.replace('/cooperativaInicio.html');
    
     });
 
     request.fail(function(data) {
     
     alert("Error en el servidor");
     
     });
 
 }
 
 function paraJson() {

    var object = { 
	    id: -1,
      mensaje : "",
    actorOrigen: {
      id: 6,
      nombreUsuario: "Cooperativa",
      tipoActor:  2
    },
    "actorDestino": {
        id: document.getElementById("identificador").value,
      nombreUsuario: "Agricultor",
      tipoActor: 1 
    },
    productosPedidos: {
	cant_malta_palida: document.getElementById("malta_palida").value-0,
	cant_malta_munich: document.getElementById("malta_munich").value-0,
	cant_malta_negra: document.getElementById("malta_negra").value-0,
	cant_malta_crystal: document.getElementById("malta_crystal").value-0,
	cant_malta_chocolate: document.getElementById("malta_chocolate").value-0,
	cant_malta_caramelo: document.getElementById("malta_caramelo").value-0,
	cant_cebada: document.getElementById("cebada").value-0, 
	cant_cebada_tostada: document.getElementById("cebada_tostada").value-0,
	cant_lupulo_centenial:document.getElementById("lupulo_centinental").value-0,
	cant_lotes_stout:0,
    	cant_lotes_bisner:0
    },
  
        };
		
		var jsonText = JSON.stringify(object);
    console.log(jsonText);
    return jsonText;

  }
 
 
 //TODO 
 
</script>
</html>